---
title: vim 使用手册
date: 2019-08-28 11:39:53
tags:
  - linux
  - tool
  - vim
categories: 工具
---

vim 是从 vi 发展出来的一个文本编辑器。代码补全、编译及错误跳转等方便编程的功能特别丰富，在程序员中被广泛使用。

vim 的常用命令以及配置。

<!--more-->

## 1. 正常模式

### 1.1 光标移动

- `h`、`j`、`k`、`l`： 分别对应着 `←`、`↓`、`↑`、`→`

**字符移动**

- `space` ：向右移动一个字符
- `nspace`：向右移动 n 个字符
- `backspace` ：向左移动一个字符
- `nbackspace`：向左移动 n 个字符

**单词移动**

- `w`： 向右移动一个词，定位在词首
- `W`： 向右移动一个长单词，定位在词首
- `b`： 向左移动一个词，定位在词首
- `B`： 向左移动一个长单词，定位在词首
- `e`：向右移动一个词，并且光标定位在词尾
- `E`： 向右移动一个长单词，定位在词尾
- `fo`： 在当前行内下一个出现字母 `o` 的地方
- `Fo`： 当前行内，上一个出现字母 `o` 的地方

**行移动**

- `ctrl+p`： 向上移动一行
- `ctrl+n`： 向下移动一行
- `Enter`： 向下移动一行
- `nEnter`： 向下移动 n 行
- `n+`： 向下移动 n 行
- `n-`： 向上移动 n 行
- `0` | `^` | `<Home>`：  到行首
- `$` | `<End>`： 到行尾
- `gg`： 到第一行
- `G`： 到最后一行
- `nG`： 移动到第 n 行行首
- `H`： 当前屏幕的顶行
- `M`： 当前屏幕的中间行
- `L`： 当前屏幕的底行
- `ctrl+o`： 跳转到上次的地方

**句、段移动**

- `(`： 到句首
- `)`： 下一句的句首
- `{`： 到段首
- `}`： 到段尾

**屏幕移动**

- `ctrl+y`： 向上滚屏
- `ctrl+e`： 向下滚屏
- `ctrl+u`： 向上滚动半屏
- `ctrl+d`： 向下滚动半屏
- `ctrl+b`： 向上滚动整屏
- `ctrl+f`： 向下滚动整屏
- `zt`： 将当前行变为屏幕第一行
- `zz`： 将当前行变为中间行
- `zb`： 将当前行变为尾行

### 1.2 操作编辑

#### 删除

- `x`： 删除光标所在的一个字符
- `nx`： 删除包括光标所在的字符的共 n 个字符
- `X`： 删除光标之前的一个字符
- `nX`： 删除光标之前的 n 个字符
- `D`： 删除光标所在的字符至行尾
- `dw`： 删除一个单词
- `ndw`： 删除 n 个单词
- `d(`： 删除至行首
- `d$`： 删除至行尾
- `dd`： 删除当前行
- `ndd`： 删除包括当前行的 n 行
- `d(`： 从光标位置删除到上一行行首
- `d)`： 从光标位置删除到下一行行首
- `d{`： 从光标位置删除到上一段开始所有字符
- `d}`： 从光标位置删除到下一段开始所有字符
- `d回车`:  删除当前行以及下一行

#### 复制

- `yl`： 复制光标所在的字符
- `nyl`： 复制光标为首的 n 个字符
- `yw`： 复制光标到词尾的字符
- `nyw`： 复制 n 个字符
- `yy`： 复制当前行
- `nyy`： 复制 n 行

#### 剪切

- `dd`： 剪切当前行
- `ndd`： 剪切 n 行

#### 粘贴

- `p`： 在光标之后粘贴
- `P`： 在光标之前粘贴

#### 撤销及重复

- `u`： 撤销改动
- `.`： 重复上一命令
- `ctrl+r` | `U`： 重做

## 2. 插入模式

- `i`： 在光标之前插入
- `a`： 在光标之后插入
- `I`： 在行首插入
- `A`： 在行尾插入
- `o`： 在当前行下面新开一行，插入
- `O`： 在当前行上面新开一行，插入
- `cc`： 删除当前行，并进入插入模式
- `s`： 删除光标所在位置的字符并进入插入模式

## 3. 末行模式

### 搜索

- `:/search`： 从当前光标向下搜索指定字符串
- `:?search`： 从当前行开始向上搜索指定字符串
- `n`： 向下重复搜索
- `N`： 向上重复搜索

### 替换

- `:s/source/replacement/`： 将当前行出现第一个源字符串替换掉
- `:s/source/replacement/g`： 将当前行的所有匹配字符串都替换掉
- `:1,2s/source/replacement/g`： 将 1 到 2 行（包括 1 和 2 行）中的所有匹配字符串都替换
- `:1,$s/source/replacement/g`： 将 1 行到最后一行的所有匹配字符串替换
- `:%s/source/replacement/g`： 将文件中所有匹配字符串替换
- `:%s/source/replacement/gc`： 每次替换之前都需要确认

### 复制

- `:1,2 co 3`： 将 1 到 2 行之间的内容复制到第 3 行下面
- `:1,2 m 3`： 将 1 到 2 行之间的内容移动到第 3 行下面

### 删除

- `:1,2 d`： 删除 1 到 2 行之间的所有内容
- `:%d` | `:1,$d`： 删除全部内容

### 保存

- `:w`： 保存
- `:w!`： 强制保存
- `:w /filename`： 另存为
- `1,2w /filename`： 将 1 到 2 行之间的内容另存为
- `:x` | `:wq`： 保存并退出
- `:q`： 退出不保存
- `:q!`： 强制退出不保存
- `:wq!`： 强制保存并退出
- `:e!`： 放弃此次修改

### 选项

- `:set number`： 是指是否显示行号
- `:set list`： 显示制表符和行尾标志
- `:hlsearch`： 是否开启高亮查找结果

## 4. 配置

更多配置可以参考 [learnvimscriptthehardway](http://learnvimscriptthehardway.onefloweroneworld.com/)

我的配置：

```unix
set number
set cursorline
set tabstop=4

set encoding=utf-8
set fileencoding=utf-8
set fileencodings=ucs-bom,utf-8,chinese,latin1

syntax on

```

